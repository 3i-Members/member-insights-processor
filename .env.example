# Member Insights Processor - Environment Configuration
# All configuration via environment variables (no JSON files required)

# =============================================================================
# Google Cloud / BigQuery Configuration (Component-Based)
# =============================================================================
# Extract these values from your Google Cloud service account JSON key file
# To get these values:
# 1. Go to Google Cloud Console > IAM & Admin > Service Accounts
# 2. Create or select a service account with BigQuery permissions
# 3. Create a JSON key and download it
# 4. Copy the values from the JSON file to the variables below
#
# JSON structure reference:
# {
#   "type": "service_account",
#   "project_id": "your-project-id",              ← GCP_PROJECT_ID
#   "private_key_id": "abc123...",                ← GCP_PRIVATE_KEY_ID
#   "private_key": "-----BEGIN PRIVATE KEY-----\n...",  ← GCP_PRIVATE_KEY
#   "client_email": "sa@project.iam.gserviceaccount.com", ← GCP_CLIENT_EMAIL
#   "client_id": "123456789",                     ← GCP_CLIENT_ID
#   ...
# }

# Required: Your Google Cloud project ID
GCP_PROJECT_ID="your-project-id"

# Required: Private key ID from service account
GCP_PRIVATE_KEY_ID="your-private-key-id"

# Required: Private key (keep the \n for line breaks, or use actual newlines)
# IMPORTANT: If copying from JSON, keep it as a single line with \n characters
# Example: "-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBg...\n-----END PRIVATE KEY-----\n"
GCP_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour_Private_Key_Here\n-----END PRIVATE KEY-----\n"

# Required: Service account email
GCP_CLIENT_EMAIL="your-service-account@your-project.iam.gserviceaccount.com"

# Required: Client ID
GCP_CLIENT_ID="123456789012345678901"

# Optional: BigQuery dataset override (uses config.yaml if not set)
# BQ_DATASET="your-dataset-id"

# =============================================================================
# AI Provider Configuration (choose one or more)
# =============================================================================
# OpenAI (recommended for gpt-4o, gpt-5)
OPENAI_API_KEY="your-openai-api-key"

# Anthropic Claude (alternative)
# ANTHROPIC_API_KEY="your-anthropic-api-key"

# Google Gemini (alternative)
# GEMINI_API_KEY="your-gemini-api-key"

# =============================================================================
# Supabase Configuration (required)
# =============================================================================
# Get these from: Supabase Dashboard > Project Settings > API
SUPABASE_URL="https://your-project.supabase.co"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"

# =============================================================================
# Airtable Configuration (optional - only needed for Airtable sync)
# =============================================================================
# Get from: Airtable > Account > Generate API key (or create Personal Access Token)
AIRTABLE_API_KEY="your-airtable-api-key"

# Base ID (from URL: airtable.com/[BASE_ID]/...)
AIRTABLE_BASE_ID="appXXXXXXXXXXXXXX"

# Table ID (not table name - more resilient to changes)
# To find table ID:
#   1. Open your base in Airtable
#   2. Click on a table
#   3. Look at the URL: airtable.com/[BASE_ID]/[TABLE_ID]/...
#   4. Table ID starts with "tbl" (e.g., tbl20Jef8xiGyenei)
AIRTABLE_TABLE_ID="tblXXXXXXXXXXXXXX"

# =============================================================================
# How to Extract Values from Service Account JSON
# =============================================================================
# If you have a service account JSON file, here's how to extract the values:
#
# Using command line (macOS/Linux):
#   cat service-account.json | jq -r '.project_id'      # → GCP_PROJECT_ID
#   cat service-account.json | jq -r '.private_key_id'  # → GCP_PRIVATE_KEY_ID
#   cat service-account.json | jq -r '.private_key'     # → GCP_PRIVATE_KEY
#   cat service-account.json | jq -r '.client_email'    # → GCP_CLIENT_EMAIL
#   cat service-account.json | jq -r '.client_id'       # → GCP_CLIENT_ID
#
# Using Python:
#   import json
#   with open('service-account.json') as f:
#       data = json.load(f)
#       print(f"GCP_PROJECT_ID={data['project_id']}")
#       print(f"GCP_PRIVATE_KEY_ID={data['private_key_id']}")
#       print(f"GCP_PRIVATE_KEY=\"{data['private_key']}\"")
#       print(f"GCP_CLIENT_EMAIL={data['client_email']}")
#       print(f"GCP_CLIENT_ID={data['client_id']}")
#
# Manual: Open the JSON file in a text editor and copy each value
